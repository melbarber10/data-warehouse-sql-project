# ðŸ“Š Gold Layer Data Catalog

The **Gold layer** contains business-ready dimension and fact tables (star schema) built from the **Silver layer**.  
These views are designed for analytics, reporting, and dashboarding.

---

## **Schema:** `gold`

### 1. `gold.dim_customers`
**Description:**  
Customer dimension table containing master customer details enriched with CRM and ERP data.

| Column Name       | Data Type     | Description |
|-------------------|--------------|-------------|
| `customer_key`    | INT           | Surrogate key for joins (generated by `ROW_NUMBER()`). |
| `customer_id`     | INT           | Unique customer ID from CRM (`cst_id`). |
| `customer_number` | VARCHAR(50)   | CRM customer key (`cst_key`). |
| `first_name`      | VARCHAR(50)   | Customer's first name. |
| `last_name`       | VARCHAR(50)   | Customer's last name. |
| `country`         | VARCHAR(50)   | Country from ERP location table. |
| `marital_status`  | VARCHAR(50)   | Marital status from CRM. |
| `gender`          | VARCHAR(50)   | Gender (CRM preferred, ERP fallback). |
| `birthdate`       | DATE          | Date of birth from ERP data. |
| `create_date`     | DATE          | Date the record was created in CRM. |
| `dwh_create_date` | TIMESTAMP     | Load timestamp (default `CURRENT_TIMESTAMP`). |

---

### 2. `gold.dim_products`
**Description:**  
Product dimension table containing active products and their categories.

| Column Name     | Data Type     | Description |
|-----------------|--------------|-------------|
| `product_key`   | INT           | Surrogate key for joins. |
| `product_id`    | INT           | Product ID from CRM (`prd_id`). |
| `product_number`| VARCHAR(50)   | CRM product key (`prd_key`). |
| `product_name`  | VARCHAR(50)   | Name of the product. |
| `category_id`   | VARCHAR(50)   | Product category ID. |
| `category`      | VARCHAR(50)   | Product category name. |
| `subcategory`   | VARCHAR(50)   | Product subcategory name. |
| `maintenance`   | VARCHAR(50)   | Maintenance category/type. |
| `cost`          | INT           | Product cost. |
| `product_line`  | VARCHAR(50)   | Product line. |
| `start_date`    | DATE          | Product launch date. |
| `dwh_create_date` | TIMESTAMP   | Load timestamp (default `CURRENT_TIMESTAMP`). |

---

### 3. `gold.fact_sales`
**Description:**  
Fact table containing transactional sales data linked to products and customers.

| Column Name    | Data Type     | Description |
|----------------|--------------|-------------|
| `order_number` | VARCHAR(50)   | Sales order number (`sls_ord_num`). |
| `product_key`  | INT           | Foreign key from `dim_products`. |
| `customer_key` | INT           | Foreign key from `dim_customers`. |
| `order_date`   | DATE          | Date the order was placed. |
| `shipping_date`| DATE          | Date the order was shipped. |
| `due_date`     | DATE          | Order due date. |
| `sales_amount` | INT           | Total sales amount. |
| `quantity`     | INT           | Number of items sold. |
| `price`        | INT           | Price per item. |
| `dwh_create_date` | TIMESTAMP  | Load timestamp (default `CURRENT_TIMESTAMP`). |

---

## ðŸ”— Relationships (Star Schema)
- **`fact_sales.product_key`** â†’ `dim_products.product_key`
- **`fact_sales.customer_key`** â†’ `dim_customers.customer_key`

---

## ðŸ“Œ Notes
- Surrogate keys (`*_key`) are generated in the view logic using `ROW_NUMBER()`.
- Only active products (`prd_end_dt IS NULL`) are included in `dim_products`.
- Gender prioritizes CRM values; falls back to ERP when CRM data is missing or `'n/a'`.

---
